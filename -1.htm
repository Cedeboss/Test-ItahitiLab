<!DOCTYPE html>
<html>

<head>

    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Wektoo</title>

    <link
            rel="stylesheet"
            type="text/css"
            href="/stylesheets/bootstrap.min.css">

    <link
            rel="stylesheet"
            type="text/css"
            href="/stylesheets/yeti.min.css">

    <link
            rel="stylesheet"
            type="text/css"
            href="/stylesheets/picto-basic.css">

    <link a
          rel="stylesheet"
          type="text/css"
          href="/scripts/fullcalendar/fullcalendar.css"/>

    <link
            rel="stylesheet"
            type="text/css"
            href="/assets/vendor/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css">

    <link
            rel="stylesheet"
            type="text/css"
            href="/scripts/jquery-toggles/css/toggles-full.css">


    <link
            rel="stylesheet"
            type="text/css"
            href="/assets/vendor/datatables.net-bs/css/dataTables.bootstrap.css">

    <link
            rel="stylesheet"
            type="text/css"
            href="/stylesheets/main.css">

    <link
            rel="stylesheet"
            type="text/css"
            href="/assets/vendor/flag-icon-css-master/css/flag-icon.min.css">

    <link href="/stylesheets/fontawesome/all.css" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <link
            rel="stylesheet"
            type="text/css"
            href="/stylesheets/500.css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript"
            src="/assets/vendor/jquery/dist/jquery.min.js">
    </script>

    

    <link rel="icon" type="image/x-icon" href="/favicon.ico"/>

</head>

<body data-route="department_view">


    <nav class="navbar navbar-wektoo sidebar" role="navigation">

    <div class="container-fluid">

        <div class="navbar-header">

            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="/departments/view/-1">
                <div class="hidden-xs hidden-sm hidden-md" style="padding-top: 5px">
                    <img id="logo-wektoo" src="/pictures/logo-wektoo.png" class="img-responsive"
                         alt="logo wektoo" width="100%">
                </div>
                <span class="hidden-lg hidden-xs">
						Wektoo
						<span class="picto basic-pictowektoo pull-right"></span>
					</span>

                <span class="hidden-lg hidden-md hidden-sm">
						Wektoo
						<span class="picto basic-pictowektoo"></span>
					</span>
            </a>

        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

            <ul class="nav navbar-nav">

                <li class="hidden-lg hidden-xs" id="toggle-sidenav">
                    <a href="#">
                        Afficher le menu
                        <span class="pull-right hidden-xs showopacity glyphicon glyphicon-chevron-right"></span>
                    </a>
                </li>

                <li >
                    <a href="/departments/view/-1">
                        Rayons &amp; Alertes
                        <span class="pull-right hidden-xs showopacity picto wektoo-QM_department"></span>
                    </a>
                </li>

                <li >
                    <a id="addProductNavLink" data-target="#modal-product-create"
                       data-toggle="modal">
                        Ajouter un produit
                        <span class="pull-right hidden-xs showopacity picto wektoo-productManagement"></span>
                    </a>
                </li>

                                    <li >
                        <a href="/users">
                            Paramètres
                            <span class="pull-right hidden-xs showopacity picto wektoo-staff"></span>
                        </a>
                    </li>
                
                                    <li >
                        <a href="/statistics">
                            Statistiques
                            <span class="pull-right hidden-xs showopacity glyphicon glyphicon-signal"></span>
                        </a>
                    </li>
                                                    <li >
                        <a href="/sessions">
                            Sessions utilisateurs
                            <span class="pull-right hidden-xs showopacity picto wektoo-QM_sessions"></span>
                        </a>
                    </li>

                    <li >
                        <a href="/unknown">
                            Base de données articles
                            <span class="pull-right hidden-xs showopacity picto wektoo-QM_product"></span>
                        </a>
                    </li>
                
                <li >
                    <a href="/stick">
                        Export des fichiers
                        <span class="pull-right hidden-xs showopacity picto basic-pictoprinter"></span>
                    </a>
                </li>

                

                <li>
                    <a>
                        <form id="form-search-products" class="form-inline" method="GET">
                            <input type="search" class="pull-left form-control" name="search"
                                   placeholder="Rechercher un produit" style="width:80%;"
                                   required>
                        </form>

                        <span class="pull-right hidden-xs showopacity picto basic-pictosearch"
                              id="btn-search-products"></span>

                        <div class="clearfix"></div>

                    </a>

                </li>

                <li class="text-left">
                    <a class="user-info">
                        <div class="media">
                            <div class="media-left">
									<span
                                            class="avatar text-center
																				avatar-dbqm">
										T
                                        I
									</span>
                            </div>
                            <div class="media-body">
                                <h5 class="media-heading">Test Ifactory</h5>
                                <small class="user-role">Responsable qualité</small>
                            </div>
                        </div>
                    </a>
                </li>

                <li>
                    <a href="/logout">
                        Déconnexion
                        <span class="pull-right hidden-xs showopacity glyphicon glyphicon-log-out"></span>
                    </a>
                </li>

            </ul>

        </div>

    </div>

    
</nav>

<script>
    $("a#addProductNavLink").click(function () {
        let url = "/products/create";

        $.ajax({
            url: url,
        }).done(function (html) {
            $('#modal-product-create .modal-body').html(html);
        });
    });

    let searchUrl = '/search/searchValue';

    $("#form-search-products").submit(function( event ) {
        event.preventDefault();
        let inputValue = $(this).find('input').first().val();
        if(inputValue !== ''){
            window.location.replace(searchUrl.replace('searchValue', encodeURIComponent(inputValue)));
        }

    });

</script>


	<div class="main">

		<div class="breadcrumb-container">
			<div>
				    <ol id="wo-breadcrumbs" class="breadcrumb" itemscope="" itemtype="http://schema.org/BreadcrumbList">

                    <li>
                <a href="/departments/view/-1">
                    <span class="basic-pictohome"></span>
                </a>
            </li>
            <li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
                <a href="/departments/view/-1" itemprop="item">
                    <span itemprop="name">Rayons &amp; Alertes</span>
                </a>
                <meta itemprop="position" content="1">
                <span class=""></span>
            </li>
            <!-- parent department -->
            </ol>
			</div>
			
			<div class="top-buttons">
				<div class="text-right top-switch-language-button">
    <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            <i data-icon="fr" class="current-lang-icon flag-icon flag-icon-fr"></i> <span class="current-lang-key" data-lang="fr">FR</span>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="min-width:78px;">
                            <li><a href="#" class="languageOptionLink" onclick="clickOnLanguageSwitchOption(this)" data-lang="en" data-icon="gb" style="padding: 3px 12px"><i class="flag-icon flag-icon-gb"></i> EN</a></li>
                            <li><a href="#" class="languageOptionLink" onclick="clickOnLanguageSwitchOption(this)" data-lang="pl" data-icon="pl" style="padding: 3px 12px"><i class="flag-icon flag-icon-pl"></i> PL</a></li>
                            <li><a href="#" class="languageOptionLink" onclick="clickOnLanguageSwitchOption(this)" data-lang="ru" data-icon="ru" style="padding: 3px 12px"><i class="flag-icon flag-icon-ru"></i> RU</a></li>
                            <li><a href="#" class="languageOptionLink" onclick="clickOnLanguageSwitchOption(this)" data-lang="es" data-icon="es" style="padding: 3px 12px"><i class="flag-icon flag-icon-es"></i> ES</a></li>
                    </ul>
    </div>
</div>

<script>

    function clickOnLanguageSwitchOption(elem){

        let clickedElement = $(elem);
        let clickedLanguageKey = clickedElement.data('lang');
        let clickedLanguageIcon = clickedElement.data('icon');
        let currentLanguageKey = $('.current-lang-key').data('lang');
        let currentLanguageIcon = $('.current-lang-icon').data('icon');

        let url = "/change-language/langKey";
        url = url.replace('langKey', clickedLanguageKey.toLowerCase());

        $.ajax({
            url: url,
            type: "GET",
            complete: function () {
                clickedElement.parent().parent().append('<li><a href="#" class="languageOptionLink" onclick="clickOnLanguageSwitchOption(this)" data-lang="' + currentLanguageKey + '" data-icon="' + currentLanguageIcon + '" style="padding: 3px 12px"><i class="flag-icon flag-icon-' + currentLanguageIcon + '"></i> ' + currentLanguageKey.toUpperCase() + '</a></li>');
                clickedElement.parent().remove();
                $('.current-lang-icon').removeClass("flag-icon-"+currentLanguageIcon).addClass("flag-icon-" + clickedLanguageIcon).data('icon', clickedLanguageIcon);
                $('.current-lang-key').data('lang', clickedLanguageKey).html(clickedLanguageKey.toUpperCase());
                window.location.reload();
            },
        });

    }
</script>
				
				<div class="text-right top-help-button" >
    <a class="help-link text-right" target="_blank" href="https://wektoofr.flowlu.com/hc/1">
        <span style="vertical-align: middle;">Aide</span> <span style="vertical-align: middle;" class="picto wektoo-menuEditor"></span>
    </a>
</div>
			</div>

		</div>

			
		<div class="content">

			
    
    <div class="expanded-container">

        <div class="row alerts departments-view-alerts">

            <a class="text-center alert alert-danger col-md-4 col-xs-12 " href="#product-data-list"
               data-alerts-type="manager" class="picto basic-pictoeyenot text-center pull-right">

                <span class="badge manager_alert_number">1</span>

                <h4>Alertes responsable</h4>

            </a>

            <a class="text-center alert alert-success col-md-4  col-xs-12 active" href="#product-data-list"
               data-alerts-type="expired">
                <span class="badge products_expired_number">129</span>
                <h4>Alertes DLC</h4>
            </a>

            <a class="text-center alert alert-warning col-md-4 col-xs-12 " href="#product-data-list"
               data-alerts-type="shortage">
                <span class="badge products_shortage_number">588</span>
                <h4>Ruptures temporaires</h4>
            </a>

        </div>

    </div>

    <h2>
                    Tous les rayons
        
    </h2>

                    <div id="departments-table">

            <p class="text-center">
            </p>

                        
    
    
    <div class="row departments" >
                                    
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/2" >
                            <h4>BOULANGERIE PATISSERIE LS</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-danger" href="/departments/view/2/manager#products-list" >
                                        <span class="picto basic-pictohead"></span><br>
                                        1
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/2/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        11
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/2/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        66
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/69" >
                            <h4>CHARCUTERIE TRAITEUR</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/69/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        45
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/3" >
                            <h4>SURGELES</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/3/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        1
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/3/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        26
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/4" >
                            <h4>GLACES</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/4/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        2
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/4/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        6
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/59" >
                            <h4>FRUITS ET LEGUMES</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/59/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        6
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/59/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        41
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/54" >
                            <h4>VOLAILLE</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/54/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        11
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/66" >
                            <h4>BOUCHERIE</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/66/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        2
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/66/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        8
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/72" >
                            <h4>POISSONNERIE</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/72/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        10
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/5" >
                            <h4>PRODUIT DE LA MER</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/5/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        4
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/5/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        15
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/6" >
                            <h4>CHARCUTERIE</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/6/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        19
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/6/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        70
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/7" >
                            <h4>FROMAGE</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/7/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        16
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/7/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        40
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/8" >
                            <h4>ULTRA FRAIS</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/8/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        42
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/8/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        73
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/74" >
                            <h4>ALLEE 1</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/74/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        9
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/74/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        44
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/77" >
                            <h4>ALLEE 2</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/77/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        1
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/77/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        14
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/79" >
                            <h4>ALLEE 4</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/79/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        11
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/79/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        76
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/83" >
                            <h4>ALLEE 5</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/83/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        1
                                    </a>
                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        0
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/88" >
                            <h4>ALLEE 6</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/88/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        1
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/88/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        16
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/93" >
                            <h4>ALLEE 7</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <a  class="col-xs-4 alert alert-manager" >
                                        <span class="picto basic-pictohead"></span><br>
                                        0
                                    </a>
                                    <a  class="col-xs-4 alert alert-success" href="/departments/view/93/expired#products-list" >
                                        <span class="picto basic-pictosquare-cross"></span><br>
                                        3
                                    </a>
                                    <a  class="col-xs-4 alert alert-warning" href="/departments/view/93/shortage#products-list" >
                                        <span class="picto basic-pictocaution"></span><br>
                                        16
                                    </a>
                                                            </div>
                        </div>
                    </div>

                                            
                    <div class="department col-lg-3 col-md-4 col-sm-6 col-xs-6" >
                        <div class="department-shadow-box">
                        <a  href="/departments/view/105" >
                            <h4>RAYON DEVANT DE CAISSE</h4>
                        </a>

                        <div class="row alerts" style="height:45px;">

                                                                    <div class="no-alerts">
                                        <span class="picto basic-pictowektoo"></span>
                                    </div>
                                                            </div>
                        </div>
                    </div>

                            
        
            </div>


        </div>
    
    <span id="products-list"></span>

    <div class="tab-content">

                <div role="tabpanel" class="tab-pane active" id="products">

            <div class="page-header">

                <h2>
                                        Produits de « TOUS LES RAYONS »                </h2>

                <small>
                    <span class="products_number">52701</span> produit(s)
                </small>
                <br/>
                <span class="text-warning">Taux de rupture : <span class="badge" id="products_shortage_rate">26.29%</span></span>

            </div>

            <div id="products-all-table">

                <div class="table-responsive">
                    <table id="product-data-list" class="table table-bordered table-striped table-hover text-center product-data-list">
                        <thead>
                        <th>Opt</th>
                        <th>Gencode <i data-column="barcode" data-order="asc" onclick="orderColumn(this)" class="glyphicon glyphicon-sort product-order-column"></i></th>
                        <th>Libellé produit <i data-column="name" data-order="asc" onclick="orderColumn(this)" class="glyphicon glyphicon-sort product-order-column"></i></th>
                        <th>Imp. Mult. <i data-column="multiShelves" data-order="asc" onclick="orderColumn(this)" class="glyphicon glyphicon-sort product-order-column"></i></th>
                        <th>Rayon <i data-column="department" data-order="asc" onclick="orderColumn(this)" class="glyphicon glyphicon-sort product-order-column"></i></th>
                        <th>Délais de rappel </i></th>
                        <th>DLC <i data-column="expirationDate" data-order="asc" onclick="orderColumn(this)" class="glyphicon glyphicon-sort product-order-column"></i></th>
                        <th>Statut</th>
                        <th>Dernière MAJ <i data-column="lastUpdate" data-order="asc" onclick="orderColumn(this)" class="glyphicon glyphicon-sort product-order-column"></i></th>
                        </thead>

                        <tbody>
                        </tbody>

                    </table>
                </div>

                <template>
                    <div>
                        <h6>Default</h6>
                        <b-pagination-nav base-url="#" :number-of-pages="10" v-model="currentPage"/>

                        <h6 class="mt-4">With link generator function</h6>
                        <b-pagination-nav :link-gen="linkGen" :number-of-pages="10" v-model="currentPage"/>
                        <br>

                        <div class="mt-4">currentPage: 1</div>
                    </div>
                </template>

                <div id="pagination" class="center-block text-center"></div>

            </div>

            <div class="text-right">
                <form method="GET" action="" class="form-inline form-show-lts-products">
                    <div class="form-group"
                         data-toggle="tooltip" data-placement="left"
                         title="Afficher les produits en rupture à long terme">
                        <label for="products_lts"
                               class="form-label">Produits en RLT</label>
                        <div class="switch-container">
                            <span class="switch-no active">Non</span>
                            <span class="switch-yes">Oui</span>
                        </div>
                    </div>
                </form>

            </div>

        </div>

        <p class="text-right btn-up">
            <a href="#" class="btn btn-lg btn-default">
			<span class="picto basic-pictosimply-asc">
            </a>
        </p>

        <div class="modal fade in " id="modal-create-department" tabindex="-1" role="dialog"
             aria-labelledby="myModalLabel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Créer un nouveau rayon</h4>
                    </div>
                    <div class="modal-body">

                        
                    </div>
                </div>
            </div>
        </div>

                
<div class="modal fade in  modal-edit-product"  tabindex="-1" role="dialog" id="">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Editer un produit</h4>
            </div>
            <div class="modal-body">
            
            </div>
        </div>
    </div>
</div>


        
<div class="modal fade in  modal-edit-department"  tabindex="-1" role="dialog" id="">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Modifier le rayon</h4>
            </div>
            <div class="modal-body">
            
            </div>
        </div>
    </div>
</div>


    </div>


		</div>

		<footer class="footer text-center ">
			<img src="/pictures/logo-wektoo-gray.png" alt="" width="10%">
                        <p class="copyright">Version 5.0.3</p>
			<p class="copyright">© 2021 Wektoo, tous droits réservés. <a data-target="#modal-legal-mentions" id="btn-load-legal-mentions" data-toggle="modal">Mentions légales</a>.</p>
		</footer>
	</div>

	<div class="modal fade in" id="modal-product-create" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Créer un nouveau produit</h4>
				</div>
				<div class="modal-body">

					
				
					
				</div>
			</div>
		</div>
	</div>


		
<div class="modal fade in  "  tabindex="-1" role="dialog" id="modal-legal-mentions">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Mentions légales</h4>
            </div>
            <div class="modal-body">
            
            </div>
        </div>
    </div>
</div>





<script type="text/javascript"
        src="/assets/vendor/bootstrap/dist/js/bootstrap.min.js">
</script>

<script type="text/javascript"
        src="/assets/vendor/moment/min/moment-with-locales.min.js">
</script>

<script type="text/javascript"
        src="/assets/vendor/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js">
</script>

<script type="text/javascript"
        src="/scripts/bootbox.min.js">
</script>

<script type="text/javascript"
        src="/scripts/main.js">
</script>

<script type="text/javascript"
        src="/bundles/fosjsrouting/js/router.js">
</script>

<script type="text/javascript"
        src="/js/routing?callback=fos.Router.setData">
</script>

<script type="text/javascript"
        src="/scripts/jquery-toggles/toggles.min.js">
</script>

<script type="text/javascript"
        src="/assets/vendor/datatables.net/js/jquery.dataTables.js">
</script>

<script type="text/javascript"
        src="/assets/vendor/datatables.net-bs/js/dataTables.bootstrap.js">
</script>

<script type="text/javascript"
        src="/assets/vendor/twigjs-bower/twig/twig.min.js">
</script>

<script type="text/javascript"
        src="/assets/vendor/chart.js/dist/Chart.js">
</script>

<script type="text/javascript"
        src="/scripts/fullcalendar/fullcalendar.min.js">
</script>

<script type="text/javascript" src="/scripts/html2canvas/html2canvas.min.js" charset="UTF-8"></script>
<script type="text/javascript" src="/scripts/FileSaver/FileSaver.js" charset="UTF-8"></script>


    <script type="text/javascript"
            src="/assets/vendor/jquery/jquery.simplePagination.js">
    </script>

    <script>

        var lts = 0;
        var pageNumber = "1";
        var alertType = "default";
        var lastOptionsUsedToLoadProducts = null;

        loadProductsData(-1, pageNumber, alertType, lts, true, "","");

        function loadPagination(itemsCount, pageNumber) {
            $('#pagination').pagination({
                currentPage : pageNumber,
                items: itemsCount,
                itemsOnPage: 20,
                prevText: "« Précédent",
                nextText: "Suivant »",
                onPageClick: function (pageNumber, event) {
                    loadProductsData(lastOptionsUsedToLoadProducts[0], pageNumber, lastOptionsUsedToLoadProducts[2], lastOptionsUsedToLoadProducts[3], lastOptionsUsedToLoadProducts[4], lastOptionsUsedToLoadProducts[5],lastOptionsUsedToLoadProducts[6]);
                }
            });
            $('#pagination').find('li a').attr('href', '#products-list');
        }

        function loadProductsData(departmentId, pageNumber, alertTypeParameter, ltsParameter, firstTime, orderedColumn, order) {
            lastOptionsUsedToLoadProducts = [departmentId, pageNumber, alertTypeParameter, ltsParameter, firstTime, orderedColumn, order];
            let url = "/products/json/list/department/pageNumber/alertType/lts";
            url = url.replace('department', departmentId)
                .replace('pageNumber', pageNumber)
                .replace('alertType', alertTypeParameter)
                .replace('lts', ltsParameter);

            if(orderedColumn && order){
                url = url + ('/' + orderedColumn + '/' + order);
            }

            $.ajax({
                url: url,
            }).done(function (data) {
                let itemsCount = renderLoadedProducts(data);
                if (firstTime === true || alertTypeParameter !== alertType || lts != ltsParameter) {
                    lts = ltsParameter;
                    alertType = alertTypeParameter;
                    loadPagination(itemsCount, pageNumber);
                }
            })
        }

        function renderLoadedProducts(data) {

            var html = "";
            if (data.dataRows.length > 0) {
                data.dataRows.forEach(function (dataRow) {

                    if (dataRow.isAllowed) {

                        html += '<tr class="product" data-id="' + dataRow.id + '" data-lts="' + dataRow.longTermShortage + '">'
                            + '<td class="text-center options"><a data-id="' + dataRow.id + '" data-at="" data-rid="" class="btn-edit-product" onClick="loadEditProductHtml(this);" data-target=".modal-edit-product" data-toggle="modal"> <span class="picto basic-pictocog"></span></a></td>'
                            + '<td> ' + dataRow.barcode + '</td>'
                            + '<td';

                        if (dataRow.unknown) {
                            html += ' class="bg-danger"';
                        }

                        html += "><span data-toggle='tooltip' data-placement='top' title='";

                        if (dataRow.name.length <= 30) {
                            html += dataRow.name;
                        } else {
                            html += dataRow.name.slice(0, 30) + '...';
                        }

                        html += "'>" + dataRow.name.toUpperCase() + '</span></td><td style="width: 115px;">';

                        if (dataRow.multiShelves)
                            html += '<span class="picto basic-pictolayers"></span>';
                    }

                    html += '</td><td class="';

                    if (dataRow.isMain) {
                        html += "bg-danger";
                    }

                    html += '">' + dataRow.department.name + "</td><td>" + dataRow.department.reminderTime + "</td><td ";

                    if (dataRow.soonExpired && !(dataRow.shortTermShortage || dataRow.longTermShortage)) {
                        html += 'class="bg-success"';
                    }

                    html += ">";

                    if (dataRow.shortTermShortage) {
                        html += '<span class="text-warning"><strong>' + dataRow.soldOutTimeText + '</strong></span>';
                    } else if (dataRow.expirationDate) {
                        html += dataRow.expirationDateDMY;
                    } else {
                        html += "Non indiqué";
                    }

                    html += '</td><td style="font-size: 1.2em;">';

                    if (dataRow.shortTermShortage) {
                        html += '<span data-toggle="tooltip" data-placement="top" title="Rupture temporaire" class="picto basic-pictocaution text-warning pull-left"></span>';
                    }

                    if (dataRow.newProduct) {
                        html += '<span data-toggle="tooltip" data-placement="top" title="Nouveau produit" class="picto basic-pictostar text-center" style="color: #5082e5;">';
                    }

                    if (dataRow.longTermShortage) {
                        html += '<span data-toggle="tooltip" data-placement="top" title="Rupture à long terme" class="picto basic-pictoeyenot text-center pull-right" style="color:   #8B4513;"></span>';
                    }

                    if (dataRow.verificationNotEqualsToExpiration) {
                        html += '<span data-toggle="tooltip" data-placement="top" title="Vérification repoussée au ' + dataRow.verificationDateDMY + '"><img style="width:24px;margin-top: -3px;"src="/pictures/icon-tranquility.png"> </span>';
                    }

                    html += "</td><td>";

                    if (dataRow.lastUpdate == '' || !dataRow.lastUpdate || dataRow.lastUpdate == "ol") {
                        html += "Jamais";
                    } else {
                        html += dataRow.lastUpdateDMYHIS;
                    }

                    html += "</td></tr>";

                });

            } else {
                html = "<tr><td colspan='9' class='text-center'>Scannez vos produits avec l&#039;application mobile pour les visualiser ici</td></tr>";
            }

            $('.products_number').html(data.totalCount);

            $('.product-data-list tbody').html("");
            $('.product-data-list tbody').html(html);


            return data.totalCount;
        }

        $('.switch-container span').click(function () {
            $('.switch-no').toggleClass('active');
            $('.switch-yes').toggleClass('active');
            if (lts == 0) {
                loadProductsData(lastOptionsUsedToLoadProducts[0], lastOptionsUsedToLoadProducts[1], lastOptionsUsedToLoadProducts[2], 1, lastOptionsUsedToLoadProducts[4], lastOptionsUsedToLoadProducts[5],lastOptionsUsedToLoadProducts[6]);
            } else {
                loadProductsData(lastOptionsUsedToLoadProducts[0], lastOptionsUsedToLoadProducts[1], lastOptionsUsedToLoadProducts[2], 0, lastOptionsUsedToLoadProducts[4], lastOptionsUsedToLoadProducts[5],lastOptionsUsedToLoadProducts[6]);
            }

        });

        $('.alert').click(function () {
            loadProductsData(-1, 1, $(this).data('alerts-type'), lts, false);
        });

        $("a#createDepartmentButton").click(function () {
            let url = "/departments/create/-1";

            $.ajax({
                url: url,
            }).done(function (html) {
                $('#modal-create-department .modal-title').html('Créer un rayon');
                $('#modal-create-department .modal-body').html(html);
            });
        });

        function submitCreateDepartmentForm(){

            let formEl = $('#department-create-form');

            $.ajax({
                url: formEl.attr('action'),
                type: "POST",
                data: formEl.serialize(),
                complete: function (response) {
                    if (response.responseJSON) {
                        $('#modal-create-department').modal('hide');
                        window.location.reload();
                    } else {
                        $('#modal-create-department .modal-body').html(response.responseText);
                    }
                },
            });
        }

        $(".editDepartmentButton").click(function () {
            let url = "/departments/edit/-1";

            $.ajax({
                url: url,
            }).done(function (html) {
                $('#modal-create-department .modal-body').html(html);
                $('#modal-create-department .modal-title').html('Modifier le rayon');
                $('#modal-create-department').modal('show');
            });
        });

        function loadEditProductHtml(element) {

            let url = "/products/edit/id";
            url = url.replace('id', $(element).data('id'));

            $.ajax({
                url: url,
            }).done(function (html) {
                $('.modal-edit-product .modal-body').html(html);
            });

        }

        function submitProductEditForm(formEl) {
            $.ajax({
                url: formEl.attr('action'),
                type: "POST",
                data: formEl.serialize(),
                complete: function (response) {
                    if (response.responseJSON) {
                        $('.modal-edit-product').modal('hide');
                        updateCounters();
                        loadProductsData(lastOptionsUsedToLoadProducts[0], lastOptionsUsedToLoadProducts[1], lastOptionsUsedToLoadProducts[2], lastOptionsUsedToLoadProducts[3], lastOptionsUsedToLoadProducts[4], lastOptionsUsedToLoadProducts[5],lastOptionsUsedToLoadProducts[6]);
                    } else {
                        $('.modal-edit-product .modal-body').html(response.responseText);
                    }
                },
            });
        }

        function orderColumn (columnElement){

            loadProductsData(lastOptionsUsedToLoadProducts[0], lastOptionsUsedToLoadProducts[1], lastOptionsUsedToLoadProducts[2], lastOptionsUsedToLoadProducts[3], lastOptionsUsedToLoadProducts[4], $(columnElement).data('column'), $(columnElement).data('order'));

            let orderVal = $(columnElement).data('order');

            if(orderVal == "asc"){
                $(columnElement).data('order','desc')
            }else{
                $(columnElement).data('order','asc')
            }

        }

        function updateCounters(){

            $.ajax({
                url: Routing.generate('department_get_manager_alerts_count', {id: -1 }),
                type: "GET",
                complete: function (response) {
                    if (response.responseText) {
                        $('.manager_alert_number').html(response.responseText);
                    }
                },
            });

            $.ajax({
                url: Routing.generate('department_get_expired_alerts_count', {id: -1 }),
                type: "GET",
                complete: function (response) {
                    if (response.responseText) {
                        $('.products_expired_number').html(response.responseText);
                    }
                },
            });

            $.ajax({
                url: Routing.generate('department_get_shortage_alerts_count', {id: -1 }),
                type: "GET",
                complete: function (response) {
                    if (response.responseText) {
                        $('.products_shortage_number').html(response.responseText);
                    }
                },
            })

        }

    </script>


</body>
</html>